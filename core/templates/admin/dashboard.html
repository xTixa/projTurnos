{% extends "../home/base.html" %}

{% load static %}

{% block title %}Admin Dashboard{% endblock %}
{% block extra_css %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
        window.chartAlunosData = {
                labels: {{ chart_alunos_labels|safe }},
                values: {{ chart_alunos_values|safe }}
        };
        window.chartTurnosData = {
                ocupadas: {{ vagas_ocupadas }},
                disponiveis: {{ vagas_disponiveis }}
        };
</script>
<script src="{% static 'js/admin/dashboard_charts.js' %}" defer></script>
{% endblock %}

{% block content %}

<h1>Painel de Administração</h1>

<!-- STATISTICS -->
<section class="stats-section">
        <div class="stats-grid">

                <div class="stat-card">
                        <i class="fa-solid fa-users"></i>
                        <h3>{{ total_users }}</h3>1
                        <p>Utilizadores</p>
                </div>

                <div class="stat-card">
                        <i class="fa-solid fa-clock"></i>
                        <h3>{{ total_turnos }}</h3>
                        <p>Turnos</p>
                </div>

                <div class="stat-card">
                        <i class="fa-solid fa-graduation-cap"></i>
                        <h3>{{ total_ucs }}</h3>
                        <p>Unidades Curriculares</p>
                </div>

                <div class="stat-card">
                        <i class="fa-solid fa-book"></i>
                        <h3>{{ total_cursos }}</h3>
                        <p>Cursos</p>
                </div>

                <div class="stat-card">
                        <i class="fa-solid fa-calendar"></i>
                        <h3>{{ total_horarios }}</h3>
                        <p>Horários PDF</p>
                </div>

        <div class="stat-card">
            <i class="fa-solid fa-file-lines"></i>
            <h3>{{ total_avaliacoes }}</h3>
            <p>Avaliações PDF</p>
        </div>

        </div>
        <!-- End of stats-grid -->

        <h2>Estatísticas</h2>

        <div class="chart-card">
                <h3>Alunos inscritos por UC</h3>
                <canvas id="chartAlunos"></canvas>
        </div>

        <div class="chart-card">
                <h3>Turnos disponíveis vs ocupados</h3>
                <canvas id="chartTurnos"></canvas>
        </div>

</section>


<!-- MANAGEMENT -->
<h2>Gestão</h2>
<div class="admin-cards">

        <a href="{% url 'home:admin_users_list' %}" class="card">
                <i class="fa-solid fa-users"></i>
                <p>Gerir Utilizadores</p>
        </a>

        <a href="{% url 'home:admin_turnos_list' %}" class="card">
                <i class="fa-solid fa-clock"></i>
                <p>Gerir Turnos</p>
        </a>

        <a href="{% url 'home:admin_horarios_list' %}" class="card">
                <i class="fa-solid fa-calendar-days"></i>
                <p>Gerir Horários</p>
        </a>

        <a href="{% url 'home:admin_avaliacoes_list' %}" class="card">
                <i class="fa-solid fa-file-lines"></i>
                <p>Gerir Avaliações</p>
        </a>

        <a href="{% url 'home:admin_uc_list' %}" class="card">
                <i class="fa-solid fa-book"></i>
                <p>Gerir UCs</p>
        </a>

        <a href="{% url 'home:admin_users_docentes' %}" class="card">
                <i class="fa-solid fa-chalkboard-teacher"></i>
                <p>Gerir Docentes</p>
        </a>

        <a href="{% url 'home:analytics_inscricoes' %}" class="card">
                <i class="fa-solid fa-chart-line"></i>
                <p>Analytics (Mongo)</p>
        </a>

        <a href="{% url 'home:admin_logs_list' %}" class="card">
                <i class="fa-solid fa-file-alt"></i>
                <p>Logs</p>
        </a>

</div>

<!-- QUICK ACTIONS -->
<h2>Ações Rápidas</h2>
<div class="quick-actions">
        <a href="{% url 'home:admin_users_create' %}">+ Criar Utilizador</a>
        <a href="{% url 'home:admin_turnos_create' %}">+ Criar Turno</a>
        <a href="{% url 'home:admin_horarios_create' %}">+ Carregar Horário PDF</a>
        <a href="{% url 'home:admin_avaliacoes_create' %}">+ Carregar Avaliações PDF</a>
        <a href="{% url 'home:analytics_inscricoes' %}"><i class="fa-solid fa-arrow-right"></i> Ver Analytics</a>
        <a href="{% url 'home:admin_logs_list' %}"><i class="fa-solid fa-arrow-right"></i> Ver Logs</a>
</div>

{% endblock %}
